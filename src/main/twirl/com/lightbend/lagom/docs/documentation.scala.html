@import com.lightbend.docs.Context
@import com.lightbend.lagom.docs.VersionPage
@import com.lightbend.lagom.docs.Section
@import com.lightbend.lagom.docs.LagomContext

@(path: String, content: Html, context: Context, version: String, versions: Seq[VersionPage], nav: List[Section], canonical: Option[String])(implicit ctx: LagomContext)

@main(Some(context.title), canonical) {
    <style type="text/css">
            @@import "@ctx.path/lib/prettify/prettify.css";
    </style>
    <script type="text/javascript" charset="utf-8" src="@ctx.path/lib/prettify/prettify.js"></script>
    <script type="text/javascript" charset="utf-8" src="@ctx.path/lib/prettify/lang-scala.js"></script>
    <script type="text/javascript">
            jQuery(function(){
                window.prettyPrint && prettyPrint();
            });
    </script>
    @for(css <- context.resources.stylesheets) {<link rel="stylesheet" type="text/css" href="@css"/>
    }@for(script <- context.resources.scripts) {<script type="text/javascript" src="@script"></script>
    }
} {

    <header class="fw-wrapper lgm-purple page-title">
        <div class="row">
            <div class="small-12 columns">
                <h1>@context.title</h1>
            </div>
        </div>
    </header>

    <div class="fw-wrapper documentation-content">
        <div class="row">
            <div class="small-12 large-7 columns">
                @* I don't know if breadcrumbs are necessary, but here they are anyway. *@
                @if(nav.size > 1) {
                    <nav class="breadcrumbs">
                        <a href="@nav.head.url">@nav.head.title</a>
                        @for(section <- nav.drop(1)) {
                            &raquo; <a href="@section.url">@section.title</a>
                        }
                    </nav>
                }

                <article>
                @content
                </article>

                @for(sourceUrl <- context.sourceUrl) {
                    <p class="edit-source">Found an error in this documentation? The source code for this page can be found
                        <a href="@sourceUrl">here</a>. Please feel free to edit and contribute a pull request.</p>
                }
            </div>
            <aside class="small-12 large-4 columns">
                <nav class="side-menu">
                    <label for="docs-version">Version:</label>
                    <select id="docs-version">
                    @for(v <- versions) {
                        <option value="@ctx.path/documentation/@v.name@if(v.exists){/@path}else{/Home.html}"@if(v.name == version){ selected="selected"}>@v.name</option>
                    }
                    </select>

                    @for(section <- nav.reverse) {
                        <h3>@section.title</h3>
                        <ul>
                        @for(link <- section.children) {
                            @if(link.current) {
                                <li class="current-page"><a href="@link.url">@link.title</a></li>
                            } else {
                                <li><a href="@link.url">@link.title</a></li>
                            }
                        }
                        </ul>
                    }
                </nav>
            </aside>
        </div>
   </div>
}