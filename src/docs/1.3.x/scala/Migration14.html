<h1 id="Lagom-1.4-Migration-Guide"><a class="section-marker" href="#Lagom-1.4-Migration-Guide">ยง</a>Lagom 1.4 Migration Guide</h1>
<p>This guide explains how to migrate from Lagom 1.3 to Lagom 1.4. If you are upgrading from an earlier version, be sure to review previous migration guides.</p><h2 id="Build-changes"><a class="section-marker" href="#Build-changes">ยง</a>Build changes</h2>
<p>The version of Lagom can be updated by editing the <code>project/plugins.sbt</code> file, and updating the version of the Lagom sbt plugin. For example:</p>
<pre class="prettyprint"><code class="language-scala">addSbtPlugin(&quot;com.lightbend.lagom&quot; % &quot;lagom-sbt-plugin&quot; % &quot;1.4.0&quot;)
</code></pre><h2 id="Configuring-Cassandra-keyspaces"><a class="section-marker" href="#Configuring-Cassandra-keyspaces">ยง</a>Configuring Cassandra keyspaces</h2>
<p>Lagom 1.4 requires each service that uses Cassandra persistence to define three keyspace configuration settings in <code>application.conf</code>:</p>
<pre class="prettyprint"><code class="language-conf">cassandra-journal.keyspace = my_service_journal
cassandra-snapshot-store.keyspace = my_service_snapshot
lagom.persistence.read-side.cassandra.keyspace = my_service_read_side
</code></pre>
<p>While different services should be isolated by using different keyspaces, it is perfectly fine to use the same keyspace for all of these components within one service. In that case, it can be convenient to define a custom keyspace configuration property and use <a href="https://github.com/typesafehub/config#factor-out-common-values">property substitution</a> to avoid repeating it.</p>
<pre class="prettyprint"><code class="language-conf">my-service.cassandra.keyspace = my_service

cassandra-journal.keyspace = ${my-service.cassandra.keyspace}
cassandra-snapshot-store.keyspace = ${my-service.cassandra.keyspace}
lagom.persistence.read-side.cassandra.keyspace = ${my-service.cassandra.keyspace}
</code></pre>
<p>Previous versions of Lagom automatically calculated a default Cassandra keyspace for each service, based on the name of the service project, and injected this keyspace configuration in development mode. When running in production, these calculated keyspaces were not used, resulting in multiple services sharing the same keyspaces by default.</p>
<p>In Lagom 1.4, services that use Cassandra persistence will fail on startup when these properties are not defined.</p>
<p>See <a href="PersistentEntityCassandra.html#Configuration">Storing Persistent Entities in Cassandra</a> for more details.</p>